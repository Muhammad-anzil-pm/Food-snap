<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nutrition Result - FoodSnap AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f3f4f6;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nutrient-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .nutrient-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        .animate-slide-up {
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Container -->
    <div class="w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row animate-slide-up">
        
        <!-- Left Side: Image & Key Stat -->
        <div class="w-full md:w-5/12 relative h-64 md:h-auto bg-gray-900">
            <!-- Food Image (Placeholder for the uploaded image) -->
            <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                 alt="Detected Food" 
                 class="w-full h-full object-cover opacity-80"
                 id="food-image">
            
            <div class="absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black/90 to-transparent text-white">
                <p class="text-sm font-medium tracking-wider uppercase text-green-400 mb-1">Detected Food</p>
                <h1 class="text-4xl font-bold leading-tight" id="food-name">Avocado Salad Bowl</h1>
                
                <!-- Calorie Badge -->
                <div class="mt-4 inline-flex items-center bg-white/20 backdrop-blur-md px-4 py-2 rounded-full border border-white/30">
                    <span class="text-2xl font-bold mr-1">üî•</span>
                    <div>
                        <span class="text-xl font-bold text-white" id="cal-display">340</span>
                        <span class="text-xs text-gray-200 uppercase ml-1">kcal / 100g</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Side: Analytics Dashboard -->
        <div class="w-full md:w-7/12 p-8 bg-gray-50">
            
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-gray-800">Nutritional Breakdown</h2>
                <span class="text-xs font-semibold text-gray-400 bg-gray-200 px-3 py-1 rounded-full">per 100g serving</span>
            </div>

            <!-- Macro Chart Section -->
            <div class="flex flex-col sm:flex-row items-center justify-between mb-8 gap-6">
                <!-- Doughnut Chart Container -->
                <div class="relative w-40 h-40 flex-shrink-0">
                    <canvas id="macroChart"></canvas>
                    <!-- Center Text overlay -->
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <span class="text-xs text-gray-400 font-semibold">Macros</span>
                    </div>
                </div>

                <!-- Legend / Key Stats -->
                <div class="flex-grow grid grid-cols-1 gap-3 w-full">
                    <!-- Protein -->
                    <div class="nutrient-card bg-white p-3 rounded-xl border-l-4 border-blue-500 shadow-sm flex justify-between items-center">
                        <div>
                            <p class="text-xs text-gray-500 font-bold uppercase">Protein</p>
                            <p class="text-lg font-bold text-gray-800"><span id="prot-val">12</span>g</p>
                        </div>
                        <div class="h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                            ü•©
                        </div>
                    </div>
                    <!-- Carbs -->
                    <div class="nutrient-card bg-white p-3 rounded-xl border-l-4 border-green-500 shadow-sm flex justify-between items-center">
                        <div>
                            <p class="text-xs text-gray-500 font-bold uppercase">Carbs</p>
                            <p class="text-lg font-bold text-gray-800"><span id="carb-val">45</span>g</p>
                        </div>
                        <div class="h-8 w-8 rounded-full bg-green-100 flex items-center justify-center text-green-600">
                            üåæ
                        </div>
                    </div>
                    <!-- Fats -->
                    <div class="nutrient-card bg-white p-3 rounded-xl border-l-4 border-yellow-500 shadow-sm flex justify-between items-center">
                        <div>
                            <p class="text-xs text-gray-500 font-bold uppercase">Fats</p>
                            <p class="text-lg font-bold text-gray-800"><span id="fat-val">18</span>g</p>
                        </div>
                        <div class="h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600">
                            ü•ë
                        </div>
                    </div>
                </div>
            </div>

            <hr class="border-gray-200 mb-6">

            <!-- Micro Nutrients (Bars) -->
            <div class="grid grid-cols-2 gap-6">
                <!-- Fibre -->
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-semibold text-gray-600">Dietary Fibre</span>
                        <span class="text-sm font-bold text-teal-600"><span id="fibre-val">8.5</span>g</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-teal-500 h-2.5 rounded-full" style="width: 45%"></div>
                    </div>
                </div>

                <!-- Sugar -->
                <div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-semibold text-gray-600">Sugar</span>
                        <span class="text-sm font-bold text-pink-600"><span id="sugar-val">3.2</span>g</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-pink-500 h-2.5 rounded-full" style="width: 15%"></div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="mt-10">
                <button onclick="window.history.back()" class="w-full px-4 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-semibold transition shadow-lg shadow-gray-300/50">
                    ‚Üê Upload Another Image
                </button>
            </div>

        </div>
    </div>

    <!-- Script to Render Charts and Handle Data -->
    <script>
        // --- 1. MOCK DATA (Replace this object with data passed from your Flask backend) ---
        const nutritionData = {
            name: "Avocado Salad Bowl",
            calories: 340,
            protein: 12,
            carbs: 45,
            fats: 18,
            fibre: 8.5,
            sugar: 3.2
        };

        // --- 2. Populate HTML Elements ---
        document.getElementById('food-name').textContent = nutritionData.name;
        document.getElementById('cal-display').textContent = nutritionData.calories;
        document.getElementById('prot-val').textContent = nutritionData.protein;
        document.getElementById('carb-val').textContent = nutritionData.carbs;
        document.getElementById('fat-val').textContent = nutritionData.fats;
        document.getElementById('fibre-val').textContent = nutritionData.fibre;
        document.getElementById('sugar-val').textContent = nutritionData.sugar;

        // --- 3. Render Chart.js Doughnut Chart ---
        const ctx = document.getElementById('macroChart').getContext('2d');
        const macroChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Protein', 'Carbs', 'Fats'],
                datasets: [{
                    data: [nutritionData.protein, nutritionData.carbs, nutritionData.fats],
                    backgroundColor: [
                        '#3b82f6', // Blue (Protein)
                        '#22c55e', // Green (Carbs)
                        '#eab308'  // Yellow (Fats)
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%', // Makes the donut thinner
                plugins: {
                    legend: {
                        display: false // We built our own custom legend
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return ` ${context.label}: ${context.raw}g`;
                            }
                        }
                    }
                },
                animation: {
                    animateScale: true,
                    animateRotate: true
                }
            }
        });
    </script>
</body>
</html>